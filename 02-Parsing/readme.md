## Парсинг сайтов  

_Общие задачи парсинга:_

- отфильтровать нужные данные  
- получить ссылки на файлы по фильтру
- скачать файлы в указанную папку  

*Способы реализации:*

1. вручную - цикл while  
2. регулярки  
3. библиотеки  (**HtmlAgilityPack**) - добавить через NuGet (см. рис в репозитории)

> Вы должны испытать и понять все три способа...

---

**docs HtmlAgilityPack**  
https://itvdn.com/ru/blog/article/using-html-agility-and-css-selectors  

---

**ТЕХНИЧЕСКОЕ ЗАДАНИЕ по теме**  (ЛАБРАБ**3** и ЛАБРАБ**4**)

**1)** написать консольную программу для скачивания всех файлов по фильтру со странички https://pcoding.ru/darkNet.php в указанную папку. Фильтром может являться указание из какой папки качать: 
"ref", "pdf", "help", "gost", "download" (ознакомьтесь с тегами страницы) **ИЛИ** указание какое расширение файла качать, например: "txt", "pdf", "zip", "dll"... Сделайте выбор сами - какой фильтр вам удобнее реализовать. В качестве примера можно использовать реализацию (см. рис. Program01.cs) и саму реализацию:

```
Program01.cs
```

Отбор можно сделать **циклом while "вручную"** или **с использованием регулярных выражений** - в примере все методы показаны.

**Архитектура программы**: создать класс со статическими методами, которые реализуют описанный функционал, а в методе **main** вы можете назначить фильтр для отбора и запускать методы из класса с функционалом.



**2)** распарсить ТВ-программу (пример страницы https://tv.yandex.ru/channel/rossiya-1-31) и сохранить результат в виде файла с разметкой **markdown**  

```
[время	название программы](ссылка на программу)  
```

> например, текущий документ оформлен с использованием разметки **markdown** 

> пример оформления приведён в файле **shedule.md** (см. в текущем репозитории) - только при обычном копировании из браузера вы получите чистый текст без разметки, чтобы увидеть что там внутри - скачайте архив всего репозитория

Это задание делать с использованием библиотеки **HtmkAgilityPack** (*на Windows и Linux работает*) - все примеры с постепенными усложнениями и с комментариями и в виде самокомментируемого кода приведены в реализациях :

```
Program02.cs
```

```
Program02.cs
Program03.cs
Program04.cs
Program05.cs
```

**Архитектура программы**: весь функционал вынести в отдельный **класс**, на основе него в методе main создавать **объект** и обращаясь к его методам и свойствам получать результат. Что должна уметь программа: 

- пользователь может выбрать название канала (сами определите штук 5-6)

- пользователь может выбрать "вчера", "сегодня", "завтра"

- в ответ программа формирует файл с разметкой **markdown** и сохраняет его в текущую папку

  

**3)** с сайта https://www.sports.ru/rfpl/table/ спарсить турнирную таблицу и сохранить в виде **csv-файла** 

Это задание можно сделать с использованием технологии по вашему выбору. **Архитектура программы**: создать библиотеку классов и откомпилировать её в dll, которая позволяет решать задачи парсинга именно этого сайта и сохранения результатов в виде csv-файлов, в методе **main** можно обращаться классам и методам из dll-библиотеки и получать список записей (строк) турнирной таблицы в виде специально декларированного класса с соответствующими полями (как столбцы турнирной таблицы), полученный список можно сохранить в назначенный csv-файл.

---

_вариант курсового проекта:_  
- сделать WinForms  
- пусть будет список прокрутки: можно менять канал из списка (сами установите 5-6 каналов)  
- пусть будет календарь или просто список (в пределах +/- семи дней): можно менять дату для парсинга ТВ-программы  

---



__Вопросы для контроля (при сдаче ЛАБРАБ):__  
1) оператор using - зачем используется  
2) основные элементы класса  
3) что такое перегрузка методов и конструкторов класса  
4) свойства и поля класса ...  
5) отличие класса от объекта )))  
6) как используется static  
7) зачем нужны аргументы в методе Main     
8) интерфейс - это что такое?  
9) операторы LINQ  

---







*Далее вспомогательный материал для Лекции...*

Возможные примеры страниц для парсинга:

---

https://yandex.ru/pogoda/perm/month/march?via=cnav  
https://www.avito.ru/perm?q=vesta  
https://www.avito.ru/perm?q=vesta&p=2  
https://tv.yandex.ru/channel/rossiya-1-31?date=2020-03-15  

---

Пример оформления тегов:

``` html  
<div class="channel-header__title">
    <figure class="image image_size_l channel-logo channel-logo_size_l channel-header__logo">
    <img class="image__img" src="//avatars.mds.yandex.net/get-tv-channel-logos/69315/2a00000160080246940dc3516e9d4ce7d9b2/orig">
    </figure>
    <h1 class="channel-header__text">Россия 1</h1>
</div>
```

---

